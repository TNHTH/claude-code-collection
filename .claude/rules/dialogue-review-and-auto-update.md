# 对话回顾与自动更新机制

> **版本**：v2.0
> **生效日期**：2026-02-10
> **目的**：确保AI助手从每次对话中学习并自动更新规则

---

## 核心原则

每次对话结束时必须执行：
1. 回顾本次对话的所有操作
2. 识别新的规则、习惯或用户偏好
3. 自动更新相关文档和skills
4. 不等用户提醒，主动改进

---

## 永久规则

### 1. 文件组织规则

> 权威定义见 `file-organization.md`，此处仅索引。

- 非项目文档 → `Si Yuan\00_收集箱\`
- 临时文件 → `.claude-temp\`
- 项目文件 → 项目目录
- 用户指定路径 → 按指定执行

### 2. 自动更新规则

每次对话结束时：
1. 检查是否有新规则 → 更新 `dynamic_rules.md`
2. 检查CLAUDE.md是否需要同步（DR-025）
3. 记录到历史归档（按需）

需要更新的文档：
- `.claude/rules/` 下的规则文档
- Skills的SKILL.md
- 系统配置文件

### 3. 工具选择与自动切换

> 权威定义见 DR-002，此处仅索引。

- 哪个好用用哪个
- 失败后自动切换，不报告"失败"
- 不等用户提醒，直接执行

---

## 自动检查清单

### 对话开始时
- [ ] 检查 `.claude/rules/` 是否有新规则
- [ ] 确认文件组织规则

### 生成文件时
- [ ] 项目文件？→ 项目目录
- [ ] 用户指定路径？→ 按指定
- [ ] 否则 → `Si Yuan\00_收集箱\`

### 对话结束时
- [ ] 识别新规则/偏好
- [ ] 更新相关文档
- [ ] 清理临时文件

---

## 用户偏好

- **文件命名**: 中文文件名，格式 `主题_类型_日期.md`
- **对话风格**: 极端高效，零前奏，要点列表为主
- **更新方式**: 主动更新，不等提醒

---

## 历史归档

对话历史记录已移至 `dialogue-history-archive.md`（按需Read，不随System Prompt加载）。

---

**文档状态**：活跃
**维护者**：Claude Code AI Assistant
